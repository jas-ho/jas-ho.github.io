---
layout: page
title: FVP Task Manager
---

<style>
  #taskList { list-style-type: none; padding: 0; margin-bottom: 60px; }
  #taskList li { margin-bottom: 10px; cursor: pointer; display: flex; align-items: center; padding: 5px; }
  .marked { font-weight: bold; }
  .completed { color: gray; text-decoration: line-through; }
  .last-marked { font-size: 1.2em; padding: 10px; border: 2px solid var(--link-color); border-radius: 5px; }
  .focused { background-color: var(--sidebar-bg); outline: 2px solid var(--link-color); }
  .task-text { flex-grow: 1; }
  .controls { display: flex; gap: 10px; }
  #newTaskForm { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--main-bg); padding: 10px; width: 100%; max-width: 650px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
  #taskInput { width: 100%; padding: 5px; margin-right: 10px; }
  button { background-color: var(--link-color); color: #fff; border: none; padding: 5px 10px; cursor: pointer; }
  button:hover { background-color: var(--link-hover-color); }
</style>

<p>Keyboard shortcuts: ↑↓ to navigate, 'm' to mark, 'c' to complete/reopen, 'n' for new task</p>
<ul id="taskList" tabindex="0"></ul>
<form id="newTaskForm" onsubmit="addTask(event)">
  <input type="text" id="taskInput" placeholder="Enter a new task" required>
  <button type="submit">Add Task</button>
</form>

<script>
  let tasks = [];
  let focusedIndex = -1;

  function renderTasks() {
    const taskList = document.getElementById('taskList');
    taskList.innerHTML = '';
    let lastMarkedIndex = tasks.findLastIndex(task => task.marked && !task.completed);
    tasks.forEach((task, index) => {
      const li = document.createElement('li');
      li.innerHTML = `
        <span class="task-text">${task.text}</span>
        <div class="controls">
          <button onclick="toggleMark(${index})">Mark</button>
          <button onclick="toggleComplete(${index})">${task.completed ? 'Reopen' : 'Complete'}</button>
        </div>
      `;
      li.setAttribute('tabindex', '0');
      li.onclick = () => setFocus(index);
      if (task.marked) li.classList.add('marked');
      if (task.completed) li.classList.add('completed');
      if (index === lastMarkedIndex) li.classList.add('last-marked');
      if (index === focusedIndex) li.classList.add('focused');
      taskList.appendChild(li);
    });
  }

  function addTask(event) {
    event.preventDefault();
    const input = document.getElementById('taskInput');
    if (input.value) {
      tasks.push({ text: input.value, marked: false, completed: false });
      input.value = '';
      renderTasks();
      focusedIndex = tasks.length - 1;
      updateFocus();
    }
  }

  function toggleMark(index) {
    tasks[index].marked = !tasks[index].marked;
    renderTasks();
  }

  function toggleComplete(index) {
    tasks[index].completed = !tasks[index].completed;
    if (tasks[index].completed) {
      tasks[index].marked = false;
    }
    renderTasks();
  }

  function setFocus(index) {
    focusedIndex = index;
    updateFocus();
  }

  function updateFocus() {
    const taskItems = document.querySelectorAll('#taskList li');
    taskItems.forEach(item => item.classList.remove('focused'));
    if (focusedIndex >= 0 && focusedIndex < taskItems.length) {
      taskItems[focusedIndex].classList.add('focused');
      taskItems[focusedIndex].focus();
    }
  }

  document.addEventListener('keydown', function(e) {
    const taskList = document.getElementById('taskList');
    if (document.activeElement === taskList || document.activeElement.closest('#taskList')) {
      switch(e.key) {
        case 'ArrowUp':
          focusedIndex = Math.max(0, focusedIndex - 1);
          updateFocus();
          e.preventDefault();
          break;
        case 'ArrowDown':
          focusedIndex = Math.min(tasks.length - 1, focusedIndex + 1);
          updateFocus();
          e.preventDefault();
          break;
        case 'm':
          if (focusedIndex !== -1) toggleMark(focusedIndex);
          break;
        case 'c':
          if (focusedIndex !== -1) toggleComplete(focusedIndex);
          break;
        case 'n':
          document.getElementById('taskInput').focus();
          e.preventDefault();
          break;
      }
    }
  });

  // Initialize with some example tasks
  tasks = [
    { text: "Create FVP MVP", marked: false, completed: false },
    { text: "Test FVP functionality", marked: false, completed: false },
    { text: "Gather user feedback", marked: false, completed: false }
  ];
  renderTasks();
  document.getElementById('taskList').focus();
</script>
